# Лабораторная работа №1

## Запросы

### Запрос OPTIONS

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Запрос *OPTIONS* используется для того, чтобы определить множество методов, которые поддерживает сервер, и параметры соединения. Ответ сервера с кодом возврата 200 OK должен иметь заголовок с перечисленными в нем возможными обрабатываемыми методами (обычно «Allow»). Тело ответа, если есть, может также содержать информацию о параметрах соединения. Если тело ответа не включено, ответ должен содержать content-length = 0.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ниже представлена таблица с резульататми:
    
| Адрес          | Ответ                                                                                          |
|----------------|------------------------------------------------------------------------------------------------|
| www.mail.ru    | Status: 200 OK Просто возвращает главную страницу mail.ru, аналогичен GET-запросу.             |
| www.ya.ru      | Status: 403 Forbidden                                                                          |
| www.rambler.ru | Status: 403 Forbidden                                                                          |
| www.google.ru  | Status: 405 Method not Allowed Хотя в заголовках появилось поле Allow со значением «GET, HEAD» |
| www.github.com | Status: 404 Not Found                                                                          |
| www.apple.com  | Status:,200 OK Просто возвращает главную страницу apple.com, аналогичен GET-запросу.           |

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Только google.com возвращает заголовок с допустимыми методами, хотя и не возвращает Status 200 OK (видимо потому что сам OPTIONS не входит в состав допустимых методов) и сообщает о том, что данный запрос не допустим. В остальных случаях обработка запроса вообще неправильная: в заголовках не появляется информации о допустимых методах.

### Запрос HEAD

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Запрос *HEAD* возвращает только заголовки (без тела), в остальном аналогичен *GET*. Используется для проверки того, что к ресурсу можно обратиться и получения метаданных.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ниже представлена таблица с резульататми:

| Адрес          | Ответ                                                                                          |
|----------------|------------------------------------------------------------------------------------------------|
| www.vk.com     | Status:,418 I’m teapot Возвращает 8 заголовков                                                 |
| www.apple.com  | Status:,200 OK Возвращает 14 заголовков                                                        |
| www.rambler.ru | Status: 200 OK Возвращает 23 заголовка                                                         |

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ни один из серверов не вернул тело заголовка (что ожидаемо), но у ответа vk.com статус 418.

### Запросы GET и POST

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ниже представлена таблица с резульататми:

| Адрес          | GET                                                                                            | POST                                                     |
|----------------|------------------------------------------------------------------------------------------------|----------------------------------------------------------|
| www.yandex.ru  | Status:,200 OK В теле главная страница сайта                                                   | Status: 403 Forbidden В теле страница с ошибкой          |
| www.apple.com  | Status:,200 OK В теле главная страница сайта                                                   | Status: 200 OK В теле главная страница сайта             |
| www.google.com | Status:,200 OK В теле главная страница сайта                                                   | Status: 405 Method Not Allowed В теле страница с ошибкой |

### API VK

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Для начала нужно получить токен при помощи команды:

```
https://oauth.vk.com/authorize?client_id=7144619&display=page&redirect_uri=http://RedfieldTest.com&scope=friends&response_type=token&v=5.101&state=123456
```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Далее получаю id МГТУ им Баумана через GET-запрос:

```
https://api.vk.com/method/database.getUniversities?q=МГТУ Баумана&access_token=***&v=5.101 
```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ответ:

```json
{
    "response": {
        "count": 16,
        "items": [
            {
                "id": 250,
                "title": "МГТУ им. Н. Э. Баумана"
            },
            {
                "id": 2168,
                "title": "КФ МГТУ им. Баумана"
            },
            {
                "id": 4536,
                "title": "МГТУ им. Н. Э. Баумана"
            },
            {
                "id": 4685,
                "title": "МГТУ им. Баумана"
            },
            {
                "id": 4873,
                "title": "МГТУ им. Н.Э. Баумана"
            },
            {
                "id": 14131,
                "title": "МГТУ им.Баумана"
            },
            {
                "id": 15053,
                "title": "МГТУ им. Баумана"
            },
            {
                "id": 15611,
                "title": "МГТУ им. Н. Э. Баумана"
            },
            {
                "id": 17574,
                "title": "МГТУ им. Баумана"
            },
            {
                "id": 31462,
                "title": "МГТУ им. Н.Э.Баумана"
            },
            {
                "id": 36162,
                "title": "МГТУ имени Баумана"
            },
            {
                "id": 93451,
                "title": "МГТУ им. Баумана"
            },
            {
                "id": 169759,
                "title": "ИСОТ МГТУ им. Н. Э. Баумана (бывш. МИПК МГТУ им. Н. Э. Баумана)"
            },
            {
                "id": 228799,
                "title": "МГТУ им. Н. Э.  Баумана"
            },
            {
                "id": 279813,
                "title": "МГТУ им.Н.Э.Баумана"
            },
            {
                "id": 1190337,
                "title": "МФ МГТУ им. Баумана"
            }
        ]
    }
}
```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Далее получаем список факультетов:

```
https://api.vk.com/method/database.getFaculties?university_id=250&access_token=2d41f6c7b91a3a0a945ebe0e336f9cde20e8b1b1cfcf66a2e8e4760358e26d81c74a6da0fa04e8b28a921&v=5.101 
```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ответ:

```json
{
    "response": {
        "count": 20,
        "items": [
            {
                "id": 1031,
                "title": "Аэрокосмический факультет"
            },
            {
                "id": 1032,
                "title": "Факультет инженерного бизнеса и менеджмента"
            },
            {
                "id": 1033,
                "title": "Факультет информатики и систем управления"
            },
            {
                "id": 1034,
                "title": "Факультет машиностроительных технологий"
            },
            {
                "id": 1035,
                "title": "Факультет оптико-электронного приборостроения"
            },
            {
                "id": 1036,
                "title": "Приборостроительный факультет"
            },
            {
                "id": 1037,
                "title": "Радиотехнический факультет"
            },
            {
                "id": 1038,
                "title": "Факультет радиоэлектроники и лазерной техники"
            },
            {
                "id": 1039,
                "title": "Факультет ракетно-космической техники"
            },
            {
                "id": 1040,
                "title": "Факультет робототехники и комплексной автоматизации"
            },
            {
                "id": 1041,
                "title": "Факультет специального машиностроения"
            },
            {
                "id": 1042,
                "title": "Факультет фундаментальных наук"
            },
            {
                "id": 1043,
                "title": "Факультет энергомашиностроения"
            },
            {
                "id": 1044,
                "title": "Кафедра юриспруденции, интеллектуальной собственности и судебной экспертизы"
            },
            {
                "id": 1803,
                "title": "Факультет биомедицинской техники"
            },
            {
                "id": 1804,
                "title": "Факультет социально-гуманитарных наук"
            },
            {
                "id": 56430,
                "title": "Факультет лингвистики"
            },
            {
                "id": 56431,
                "title": "Физкультурно-оздоровительный факультет"
            },
            {
                "id": 2071503,
                "title": "Головной учебно-исследовательский и методический центр (ГУИМЦ)"
            },
            {
                "id": 2183736,
                "title": "Факультет военного обучения (Военный институт)"
            }
        ]
    }
}
```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Получаю аватарку:

```
https://api.vk.com/method/users.get?fields=photo_max_orig&access_token=2d41f6c7b91a3a0a945ebe0e336f9cde20e8b1b1cfcf66a2e8e4760358e26d81c74a6da0fa04e8b28a921&v=5.101 
```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ответ:

```json
{
    "response": [
        {
            "id": 257343523,
            "first_name": "Алексей",
            "last_name": "Краснопольский",
            "is_closed": false,
            "can_access_closed": true,
            "photo_max_orig": "https://sun9-45.userapi.com/c840329/v840329006/1a3db/CEljOXO3adk.jpg?ava=1"
        }
    ]
}
```

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Код от API присылается 200 OK. Тело ответа содержишь JSON с запрошенной информацией. Версия: http/2, сервер - VK.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Отправляю запрос напрямую из формы:

![001](https://sun9-60.userapi.com/c857624/v857624539/873b7/5gVEfTtRQ_4.jpg)

![002](https://sun9-17.userapi.com/c857624/v857624539/873c1/neOgc4QRMdc.jpg)

![003](https://sun9-59.userapi.com/c857624/v857624539/873ca/VrSUqwpFuCc.jpg)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; POST-запрос передает серверу переменные и их значения в своем теле. В случае с методом GET они хранились в строке запроса.

## Простой Сервер

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Код:

[Телефонная книга](https://git.iu7.bmstu.ru/iu7-web-2019/iu7-web-2019-krasnopolsky-alexey/blob/lab_01/lab_01/SimpleServer.js)

[Статика](https://git.iu7.bmstu.ru/iu7-web-2019/iu7-web-2019-krasnopolsky-alexey/blob/lab_01/lab_01/server.js)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Если поменять разрешение html-страницы в .txt, то при получении этой страницы он будет воспринят как обычный текстовый файл, то есть будет получен просто текст с синтаксисом html. Если у ответа на запрос выставить заголовок *Content-Type* значение *text/html*. 